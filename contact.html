<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Contact - Mini Site</title>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Arial, sans-serif;
}

body{
  background: linear-gradient(135deg, #4facfe, #ffffff);
}

/* HEADER */
header{
  background: rgba(0,0,0,0.7);
  color:white;
  padding:20px;
  text-align:center;
}

/* BOUTONS */
.buttons{
  text-align:center;
  margin:20px 0;
}

.btn{
  padding:12px 25px;
  margin:10px;
  border:none;
  border-radius:30px;
  cursor:pointer;
  font-weight:bold;
  transition:0.3s;
}

.btn-yes{
  background: linear-gradient(135deg,#4facfe,#00f2fe);
  color:white;
}

.btn-no{
  background:#ff4d4d;
  color:white;
}

.btn:hover{
  transform: scale(1.1);
}

/* MAP */
#map{
  height:500px;
  width:90%;
  margin:20px auto;
  border-radius:15px;
  box-shadow:0 8px 20px rgba(0,0,0,0.2);
}

/* RESPONSIVE */
@media(max-width:768px){
  #map{
    height:400px;
  }

  .btn{
    width:80%;
  }
}

</style>
</head>

<body>

<header>
<h2>Nos Coordonnées</h2>
<p>Email : contact@monsite.com</p>
<p>Nom : Njoya Soumiatou Leyla | Filière : Gestion des Systèmes d'Information (GSI)</p>
</header>

<div class="buttons">
  <button class="btn btn-yes" onclick="activerLocalisation()">
    Se Localiser (Tracking)
  </button>

  <button class="btn btn-no" onclick="refuserLocalisation()">
    Ne Pas Se Localiser
  </button>

  <button class="btn" onclick="arreterTracking()">
    Arrêter le Tracking
  </button>
</div>

<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>

let map = L.map('map').setView([0,0], 2);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

let marker;
let watchID;

function activerLocalisation(){

  if(navigator.geolocation){

    watchID = navigator.geolocation.watchPosition(

      function(position){

        let lat = position.coords.latitude;
        let lng = position.coords.longitude;

        map.setView([lat,lng], 16);

        if(marker){
          marker.setLatLng([lat,lng]);
        } else {
          marker = L.marker([lat,lng])
            .addTo(map)
            .bindPopup("Vous êtes ici")
            .openPopup();
        }

      },

      function(error){
        alert("Erreur : " + error.message);
      },

      {
        enableHighAccuracy: true,
        maximumAge: 0,
        timeout: 5000
      }

    );

  } else {
    alert("La géolocalisation n'est pas supportée.");
  }
}

function arreterTracking(){
  if(watchID){
    navigator.geolocation.clearWatch(watchID);
    alert("Tracking arrêté.");
  }
}

function refuserLocalisation(){
  alert("Vous avez choisi de ne pas vous localiser.");
}

</script>

</body>
</html>